<!doctype html>
<html lang="en">
<head>
	<title>1Beauty | Login</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/favicon.png">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
	<link rel="icon" href="/img/favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" href="css/login.css">

	</head>
	<body class="img js-fullheight" style="background-image: url(img/breadcrumb.jpg);">
	<section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6 text-center mb-5">
					<h1 class="heading-section" style="font-size: 40px;font-weight: 600;">Welcom To <strong style="color: #4de98e;">1Beauty</strong> </h1>
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-md-6 col-lg-8">
					<div class="login-wrap p-0">
						<a style="font-size: 20px; text-align: center;display: block;color: #37e780;" href="/">Go back to Home</a>
						<h3 class="mb-4 text-center" style="font-size: 28px;font-weight: 600;">Register</h3>
						<div  class="signin-form" style="margin-bottom: 100px;">
							<div class="row">
								<div class="col-lg-6">
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Full name" required="true" name="name">
										<span class="info-err" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
									</div>
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Address" required="true" name="address">
										<span class="info-err" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
									</div>
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Gmail" required="true" name="gmail">
										<span class="info-err-gmail" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
									</div>
									<div class="form-group" style="display: flex;flex-direction: row;">
										<label for="mail" style="width: 80px; color: black;font-weight: 600; background-color: whitesmoke; text-align: center; margin-right: 10px; border-radius: 5px;">Male</label>
										<input type="radio" class="form-control" value="male" id="mail" name="gender" style="width: 20px;height: 30px;" required>
										
										
									</div>
									<div class="form-group" style="display: flex;flex-direction: row;">
										<label for="femail" style="width: 80px; color: black;font-weight: 600; background-color: whitesmoke; text-align: center; margin-right: 10px; border-radius: 5px;">Female</label>
										<input type="radio" class="form-control" value="female" name="gender" style="width: 20px;height: 30px;" required="true"> 
										
									</div>
								</div>
								<div class="col-lg-6">
									<div class="form-group">
										<input type="text" class="form-control" placeholder="Username" required name="username">
										<span class="info-err-username" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
									</div>
									<div class="form-group">
										<input id="password-field" type="password" class="form-control" placeholder="Your password" required="true" name="password">
										<span class="info-err" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
										<span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span>
									</div>
									<div class="form-group">
										<input id="password-field" type="password" class="form-control" placeholder="Retype your Password" required="true" name="retypePassword">
										<span class="info-errr" style="color: rgb(200 35 35); font-size: 14px;font-weight: 550;"></span>
										<span toggle="#password-field" class="fa fa-fw fa-eye field-icon toggle-password"></span>
									</div>
									<div class="form-group">
										<button id="type-pass" type="submit" style="display: flex;align-items: center;justify-content: center;" class="form-control btn btn-primary submit px-3">Register</button>
									</div>
								</div>
							</div>
							
							
							
						</div>
						<p class="w-100 text-center">&mdash; Or Sign In With &mdash;</p>
						<div class="social d-flex text-center">
							<a href="#" class="px-2 py-2 mr-md-1 rounded"><span class="ion-logo-facebook mr-2"></span> Facebook</a>
							<a href="#" class="px-2 py-2 ml-md-1 rounded"><span class="ion-logo-twitter mr-2"></span> Google</a>
						</div>
						<a class="register" style="color:#37e780;font-size: 20px;" href="/login">You have a account ? </a>
					</div>
				</div>
			</div>
		</div>
		<div  id="succes-info"style="position: fixed; top: -300px; left: 50%;transform: translateX(-50%); transition: 0.4s;">
			<div style="display: flex; background-color: aliceblue;border-radius: 10px;">
				<i class="bi bi-hand-thumbs-up" style="font-size: 30px ;color: #37e780;padding: 30px; padding-right: 0px;"></i>
				<h2 style="padding: 30px;color: #37e780">Register Successfull !! </h2>
			</div>
		</div>
	</section>


	<script src="js/jquery-3.3.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/login.js"></script>
	<script>
        document.addEventListener('DOMContentLoaded',()=>{
			
            const retype=document.querySelector('input[name="retypePassword"]')
            retype.addEventListener('input',(e)=>{
                let password=document.querySelector('input[name="password"]').value
                if(e.target.value!==password){
                    document.querySelector('.info-errr').innerText="Don't match with your password"
                }
                else{
                    document.querySelector('.info-errr').innerText=''
                }
            })

			const gmailEle=document.querySelector('input[name="gmail"]')
			gmailEle.addEventListener('blur',(e)=>{
				if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.target.value)==false){
					document.querySelector('.info-err-gmail').innerText='Email not invalid'
				}
			})
			gmailEle.addEventListener('input',()=>{
				document.querySelector('.info-err-gmail').innerText=''
			})

			const btnSubmit=document.querySelector('button[type="submit"]')
			btnSubmit.addEventListener('click',(e)=>{
				e.preventDefault()
				const inputEle=document.querySelectorAll('input[name]')
				let DATA={}
				inputEle.forEach(item=>{
					DATA[item.name]=item.value
				})
				console.log(DATA)
				let isEmail=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(gmailEle.value)
				if (retype.value===document.querySelector('input[name="password"]').value && isEmail){
					console.log('vo day')
					console.log(retype.value)
					console.log(document.querySelector('input[name="password"]'))
					fetch("http://localhost:3000/register",
					{
						headers: {
						'Accept': 'application/json',
						'Content-Type': 'application/json'
						},
						method: "POST",
						body: JSON.stringify(DATA)
					})
					.then(res=>res.json())
					.then(res=>{
						if(!res.success){
							if(res.err==='username'){
								document.querySelector('.info-err-username').innerText='This username has been existed, please choose another username'
							}
						}
						else{
							document.querySelector('#succes-info').style.top='200px'
							setTimeout(()=>{
								window.location.href=window.location.origin+'/login'
							},800)
						}
					})
				}
				
			})
        })
    </script>
	<script>
		document.addEventListener('DOMContentLoaded',()=>{
			
			// document.querySelector('.submit').addEventListener('click',()=>{
			// 	const dataEle=document.querySelectorAll('input[name]')
			// 	dataEle.forEach(item=>{
			// 		item.addEventListener('input',(e)=>{
			// 			e.target.nextElementSibling.textContent=''
			// 		})
			// 	})
			// 	data={[dataEle[0].name]:dataEle[0].value,[dataEle[1].name]:dataEle[1].value,[dataEle[2].name]:dataEle[2].value}
			// 	fetch("http://localhost:3000/login",
			// 	{
			// 		headers: {
			// 		'Accept': 'application/json',
			// 		'Content-Type': 'application/json'
			// 		},
			// 		method: "POST",
			// 		body: JSON.stringify(data)
			// 	})
			// 	.then(res=>res.json())
			// 	.then(res=>{
			// 		console.log(res)
			// 		if(res.success){
			// 			window.location.replace("http://localhost:3000");
			// 		}else{
			// 			if(res.type==='username'){
			// 				document.querySelectorAll('.info-err')[0].innerHTML=`<i class="bi bi-exclamation-triangle-fill"> ${res.message}</i>`
			// 			}
			// 			else{
			// 				document.querySelectorAll('.info-err')[1].innerHTML=`<i class="bi bi-exclamation-triangle-fill"> ${res.message}</i>`
			// 			}
			// 		}
			// 	})
			// })
		})	
	</script>
	</body>
</html>

